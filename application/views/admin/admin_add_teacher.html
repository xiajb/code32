<!DOCTYPE html>
<html>

<head>
    <title>Your Admin Panel</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <!-- jQuery AND jQueryUI -->
    <script type="text/javascript" src="<?php echo base_url('back/js/libs/jquery/1.6/jquery.min.js'); ?>"></script>
    <script type="text/javascript" src="<?php echo base_url('back/js/libs/jqueryui/1.8.13/jquery-ui.min.js'); ?>"></script>
    <!-- Compressed Version
        <link type="text/css" rel="stylesheet" href="min/b=CoreAdmin&f=css/reset.css,css/style.css,css/jqueryui/jqueryui.css,js/jwysiwyg/jquery.wysiwyg.old-school.css,js/zoombox/zoombox.css" />
        <script type="text/javascript" src="min/b=CoreAdmin/js&f=cookie/jquery.cookie.js,jwysiwyg/jquery.wysiwyg.js,tooltipsy.min.js,iphone-style-checkboxes.js,excanvas.js,zoombox/zoombox.js,visualize.jQuery.js,jquery.uniform.min.js,main.js"></script>
        -->
    <link rel="stylesheet" href="<?php echo base_url('back/css/min.css'); ?>" />
    <script type="text/javascript" src="<?php echo base_url('back/js/min.js'); ?>"></script>
    <script src="<?php echo base_url('index/js/plupload.full.min.js'); ?>" type="text/javascript"></script>
</head>

<body>
    <script type="text/javascript" src="<?php echo base_url('back/content/settings/main.js'); ?>"></script>
    <link rel="stylesheet" href="<?php echo base_url('back/content/settings/style.css'); ?>" />
    <div class="settings" id="settings">
        <div class="wrapper">
            <div class="grid3">
                <div class="titre">Backgrounds</div>
                <a href="<?php echo base_url('back/css/img/bg.html'); ?>" class="backgroundChanger active" title="White"></a>
                <a href="<?php echo base_url('back/css/img/dark-bg.html'); ?>" class="backgroundChanger dark" title="Dark"></a>
                <a href="<?php echo base_url('back/css/img/wood.html'); ?>" class="backgroundChanger dark" title="Wood"></a>
                <a href="<?php echo base_url('back/css/img/altbg/smoothwall.html'); ?>" class="backgroundChanger" title="Smoothwall"></a>
                <a href="<?php echo base_url('back/css/img/altbg/black_denim.html'); ?>" class="backgroundChanger dark" title="black_denim"></a>
                <a href="<?php echo base_url('back/css/img/altbg/carbon.html'); ?>" class="backgroundChanger dark" title="Carbon"></a>
                <a href="<?php echo base_url('back/css/img/altbg/double_lined.html'); ?>" class="backgroundChanger" title="Double lined"></a>
                <div class="clear"></div>
            </div>
            <div class="grid3">
                <div class="titre">Bloc style</div>
                <a href="black.html" class="blocChanger" title="Black" style="background:<?php echo base_url('back/css/img/bloctitle.png'); ?>;"></a>
                <a href="white.html" class="blocChanger active" title="White" style="background:<?php echo base_url('back/css/img/white-title.png'); ?>;"></a>
                <a href="wood.html" class="blocChanger" title="Wood" style="background:<?php echo base_url('back/css/img/wood-title.jpg'); ?>;"></a>
                <div class="clear"></div>
            </div>
            <div class="grid3">
                <div class="titre">Sidebar style</div>
                <a href="grey.html" class="sidebarChanger active" title="Grey" style="background:#494949"></a>
                <a href="black.html" class="sidebarChanger" title="Black" style="background:#262626"></a>
                <a href="white.html" class="sidebarChanger" title="White" style="background:#EEEEEE"></a>
                <div class="clear"></div>
            </div>
            <div class="clear"></div>
        </div>
        <a class="settingbutton" href="#">
        </a>
    </div>
    <!--              
                HEAD
                        -->
    <div id="head">
        <div class="left">
            <a href="#" class="button profile"><img src="<?php echo base_url('back/img/icons/top/huser.png'); ?>" alt="" /></a> Hi,
            <a href="#">John Doe</a> |
            <a href="#">Logout</a>
        </div>
        <div class="right">
            <form action="#" id="search" class="search placeholder">
                <label>Looking for something ?</label>
                <input type="text" value="" name="q" class="text" />
                <input type="submit" value="rechercher" class="submit" />
            </form>
        </div>
    </div>
    <!--            
                SIDEBAR
                         -->
    <div id="sidebar">
        <ul>
            <li>
                <a href="index.html">
                        <img src="<?php echo base_url('back/img/icons/menu/inbox.png'); ?>" alt="" />
                        数据后台
                    </a>
            </li>
            <li><a href="#"><img src="<?php echo base_url('back/img/icons/menu/layout.png'); ?>" alt="" />数据管理</a>
                <ul>
                    <li><a href="<?php echo base_url('index.php/admin/user')?>">用户数据</a></li>
                    <li class="current"><a href="<?php echo base_url('index.php/admin/teacher')?>">老师数据</a></li>
                    <li><a href="<?php echo base_url('index.php/admin/course')?>">课程管理</a></li>
                </ul>
            </li>
            <li class="current"><a href="#"><img src="<?php echo base_url('back/img/icons/menu/brush.png'); ?>" alt="" />数据添加</a>
                <ul>
                    <li><a href="<?php echo base_url('index.php/admin/course/add_course')?>">课程添加</a></li>
                    <li><a href="<?php echo base_url('index.php/admin/video/add_video')?>">视屏上传</a></li>
                    <li class="current"><a href="<?php echo base_url('index.php/admin/teacher/add_teacher')?>">添加老师</a></li>
                    <li><a href="<?php echo base_url('index.php/admin/admin/add_admin')?>">添加管理员</a></li>
                </ul>
            </li>
            <li><a href="#"><img src="<?php echo base_url('back/img/icons/menu/brush.png'); ?>" alt="" />数据审核</a>
                <ul>
                    <li><a href="<?php echo base_url('index.php/admin/main/check_course')?>">课程审核</a></li>
                    <li><a href="<?php echo base_url('index.php/admin/main/check_video')?>">视屏审核</a></li>
                    <li><a href="<?php echo base_url('index.php/admin/main/check_teacher')?>">老师审核</a></li>
                </ul>
            </li>
        </ul>
    </div>
    <!--            
              CONTENT 
                        -->
    <div id="content" class="white">
        <h1><img src="img/icons/posts.png" alt="" /> Forms</h1>
        <div class="bloc">
            <div class="title">添加老师</div>
            <div class="content">
                <div class="input">
                    <label for="input1">姓名</label>
                    <input type="text" id="name"  name="name"/> Some informations on how to use this field
                </div>

                <div class="input">
                    <label for="file">上传头像</label>
                    <input type="text"  style="display: inline;"/>
                    <div id="btn">上传图片</div> 最大500KB，支持jpg，gif，png格式。
                    <ul id="ul_pics" class="ul_pics clearfix"></ul>
                </div>
                <style type="text/css">
                    #btn{
    background-color: #00b7f1;
    color: #fff !important;
    padding: 0 8px;
    height: 24px;
    line-height: 24px;
    position: relative;
    display: inline-block;
    cursor: pointer;
    border-radius: 5px;
                    }
                </style>
                <div class="input textarea" style="width:500px">
                    <label for="textarea1">自我介绍</label>
                    <textarea name="text"  rows="7" cols="4" name="intro" id="intro"></textarea>
                </div>
                <div class="submit">
                    <input type="button"  id="button" value="提交" />
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
var uploader = new plupload.Uploader({ //创建实例的构造方法 
    runtimes: 'html5,flash,silverlight,html4',
    //上传插件初始化选用那种方式的优先级顺序 
    browse_button: 'btn',
    // 上传按钮 
    url: "../upload_pic",
    //远程上传地址 
    flash_swf_url: 'plupload/Moxie.swf',
    //flash文件地址 
    silverlight_xap_url: 'plupload/Moxie.xap',
    //silverlight文件地址 
    filters: {
        max_file_size: '500kb',
        //最大上传文件大小（格式100b, 10kb, 10mb, 1gb） 
        mime_types: [ //允许文件上传类型 
            {
                title: "files",
                extensions: "jpg,png,gif"
            }
        ]
    },
    multi_selection: true,
    //true:ctrl多文件上传, false 单文件上传 
    init: {
        FilesAdded: function(up, files) { //文件上传前 
            if ($("#ul_pics").children("li").length > 30) {
                alert("您上传的图片太多了！");
                uploader.destroy();
            } else {
                var li = '';
                plupload.each(files,
                    function(file) { //遍历文件 
                        li += "<li id='" + file['id'] + "'><div class='progress'><span class='bar'></span><span class='percent'>0%</span></div></li>";
                    });
                $("#ul_pics").append(li);
                uploader.start();
            }
        },
        UploadProgress: function(up, file) { //上传中，显示进度条 
            $("#" + file.id).find('.bar').css({
                "width": file.percent + "%"
            }).find(".percent").text(file.percent + "%");
        },
        FileUploaded: function(up, file, info) { //文件上传成功的时候触发 
            var data = JSON.parse(info.response);
            $("#" + file.id).html("<div class='img' ><img  style='width:220px;' src='../../../" + data.pic + "'/></div><p style='display:none;' id='picname'>" + data.pic + "</p>");
        },
        Error: function(up, err) { //上传出错的时候触发 
            alert(err.message);
        }
    }
});

uploader.init();
$("#button").click(function() {
    console.log($("#picname").html());
    var value = {
        "name": $("#name").val(),
        "intro": $("#intro").val(),
        "pic": $("#picname").html()
    }
    console.log(value);
    $.ajax({
        type: 'POST',
        url: "<?php echo base_url('index.php/admin/teacher/c_teacher'); ?>",
        data: 'data=' + JSON.stringify(value),

        success: function(result) {
            console.log(result);
        }
    });
});
</script>
</body>

</html>